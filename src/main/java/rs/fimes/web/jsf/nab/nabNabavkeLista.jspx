<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:sf="http://www.springframework.org/tags/faces"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Набавке унутар плана</title>
</head>
<body>
  <f:view>
    <ui:composition template="/WEB-INF/layouts/standard.jspx">
      <ui:define name="content">
        <rich:panel styleClass="fimesMainForm">
          <h:form>
            <h:panelGrid styleClass="fimesFormTitle" width="100%">
              <h:outputText
                value="#{nabNabavkaController.module.messageSource.nabNabavkaListaHeader}" />
            </h:panelGrid>
            <rich:layout>
              <rich:layoutPanel position="top">
                <h:panelGrid styleClass="fimesInputGroup"
                  columnClasses="fimesAlignCenter" width="100%">
                  <h:panelGrid columns="3"
                    styleClass="fimesTableCentered"
                    columnClasses="fimesAlignCenter">
                  </h:panelGrid>
                </h:panelGrid>
                <rich:spacer height="20px" />
                <h:panelGroup id="p1" layout="block">
                  <rich:extendedDataTable height="318px"
                    rowClasses="redAnimacija" id="tabelaNabPlan"
                    enableContextMenu="false"
                    noDataLabel="#{objEvidencijaObjekataController.module.messageSource.commonNoDataLabel}"
                    value="#{nabPlanController.nabJavnaNabavkaExtendedDataTableModelApi}"
                     selection="#{nabNabavkaController.nabJavnaNabavkaExtendedDataTableModelApi.selection}"
                    var="nabavka">
<!--                     selekcija -->
                    <a4j:support event="onselectionchange" 
                      action="#{nabNabavkaController.handleSelection}" 
                       reRender="t1" /> 

                    <rich:column id="kolona1" width="10%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaRb}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.idJavnaNabavka}" />
                    </rich:column>
                    <rich:column id="kolona2" width="15%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaPredmet}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.opis}" />
                    </rich:column>
                    <rich:column id="kolona3" width="15%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaVrstaPredmeta}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.vrstaPredmetaNabavke.naziv}" />
                    </rich:column>
                    <rich:column id="kolona4" width="15%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaVrstaPostupka}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.vrstaPostupka.naziv}" />
                    </rich:column>
                    <rich:column id="kolona5" width="15%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaMesec}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.mesecPokretanja}" />
                    </rich:column>
                    <rich:column id="kolona6" width="10%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaGodina}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.godinaPokretanja}" />
                    </rich:column>
                    <rich:column id="kolona3" width="10%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaInterniBrojPostupka}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.interniBroj}" />
                    </rich:column>
                    <rich:column id="kolona32" width="15%"
                      styleClass="fimesAlignLeft">
                      <f:facet name="header">
                        <h:outputText styleClass="headerText"
                          value="#{nabNabavkaController.module.messageSource.nabNabavkaListaStatusPostupakaUPlanu}" />
                      </f:facet>
                      <h:outputText
                        value="#{nabavka.statusNabavke.naziv}" />
                    </rich:column>
                    <f:facet name="footer">
                      <h:panelGroup layout="block"
                        styleClass="fimesAlignLeft">
                        <h:outputText
                          value="#{objEvidencijaObjekataController.module.messageSource.commonUkupno}" />
                      </h:panelGroup>
                    </f:facet>
                  </rich:extendedDataTable>
                  <rich:spacer height="50px" />
                  <h:panelGroup id="t1" layout="block"
                    styleClass="fimesAlignRight">
                    <a4j:commandButton
                      styleClass="fimesButton objDugmeUFuteruTabele"
                      status="statusWait"
                      value="#{nabNabavkaController.module.messageSource.nabNabavkaAzuriranjeNabavke}"
                      action="#{nabNabavkaController.azurirajNabavku}"
                      oncomplete="#{rich:component('nabNovaNabavkaModalPanel')}.show()"
                      reRender="nabNovaNabavkaModalPanel"
                      disabled="#{empty nabNabavkaController.izabranaNabavka}" />
                    <rich:spacer width="5px" />
                    <a4j:commandButton styleClass="fimesButton"
                      action="#{nabNovaNabavkaController.resetSelection}"
                      oncomplete="#{rich:component('nabNovaNabavkaModalPanel')}.show()"
                      reRender="nabNovaNabavkaModalPanel"
                      value="#{nabNabavkaController.module.messageSource.nabNabavkaNovaNabavka}"
                      />
                  </h:panelGroup>
                </h:panelGroup>
              </rich:layoutPanel>
            </rich:layout>
          </h:form>
          <a4j:include
            viewId="#{coreWebController.coreModalOkDijalogView}" />
          <a4j:include
            viewId="#{coreWebController.coreModalErrorDijalogView}" />
        </rich:panel>
        <a4j:include
          viewId="#{nabWebController.nabProcenjenaVrednostUnosModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNovaNabavkaModalPanelView}" />
        <a4j:include
          viewId="#{coreWebController.ajaxStatusModalPanelView}" />
        <a4j:status id="waitStatus"
          onstart="#{rich:component('ajaxStatusModalPanel')}.show()"
          onstop="#{rich:component('ajaxStatusModalPanel')}.hide()" />
      </ui:define>
    </ui:composition>
  </f:view>
</body>
</html>