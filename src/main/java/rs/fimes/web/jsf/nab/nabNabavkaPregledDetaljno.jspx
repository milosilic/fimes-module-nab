<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:sf="http://www.springframework.org/tags/faces"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Набавка преглед детаљно</title>
</head>
<body>
  <f:view>
    <ui:composition template="/WEB-INF/layouts/standard.jspx">
      <ui:define name="content">
        <rich:panel styleClass="fimesMainForm">
          <h:panelGrid styleClass="fimesFormTitle" width="100%">
            <h:outputText
              value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaDetaljiHeader}" />
          </h:panelGrid>


          <rich:spacer height="10" />
          <h:form id="formNovaNabavka">
            <a4j:jsFunction name="nabProcenaBrisanje"
              action="#{nabNovaNabavkaController.obrisiProcenu}"
              oncomplete="#{rich:component('coreModalDaNeDijalog')}.hide();#{rich:component('coreOkModalPanel')}.show();"
              reRender="coreOkModalPanel,tabelaProcenaPoGodinama" />
            <a4j:jsFunction name="nabPartijaBrisanje"
              action="#{nabNovaNabavkaController.obrisiPartiju}"
              oncomplete="#{rich:component('coreModalDaNeDijalog')}.hide();#{rich:component('coreOkModalPanel')}.show();"
              reRender="coreOkModalPanel,tabelaPartijaNabavke" />
            <a4j:jsFunction name="nabNabavkaKontoPartijaBrisanje"
              action="#{nabNovaNabavkaController.obrisiNabKontoPartiju}"
              oncomplete="#{rich:component('coreModalDaNeDijalog')}.hide();#{rich:component('coreOkModalPanel')}.show();"
              reRender="coreOkModalPanel,tabelaNabKontoPartija" />
            <a4j:jsFunction name="nabNabavkaJrnBrisanje"
              action="#{nabNovaNabavkaController.obrisiNabavkaJrn}"
              oncomplete="#{rich:component('coreModalDaNeDijalog')}.hide();#{rich:component('coreOkModalPanel')}.show();"
              reRender="coreOkModalPanel,tabelaNabavkaJrnExtended" />
            <h:panelGroup id="nabavkaBody" styleClass="fimesZrdBody">
              <h:panelGrid id="tabelaObjObjekat"
                styleClass="objKartonTab" columns="2" width="100%"
                columnClasses="fimesTable2ColumnWidthEqual,fimesTable2ColumnWidthEqual"
                rowClasses="redPanelGrid">
                <h:panelGrid columns="2"
                  styleClass="fimesInputGroup fimesTableCentered maxWidth"
                  columnClasses="fimesTable2ColumnLabel,fimesTable2ColumnField"
                  cellspacing="2">
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaOpisPredmetaNabavke}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.opis}" readonly="true"/>
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaInterniBroj}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.interniBroj}" readonly="true"/>
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaUkupnaBezPdv}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.procenaBezPdv}" readonly="true"/>
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaUkupnaSaPdv}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.procenaSaPdv}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaVrstaPredmeta}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.vrstaPredmetaNabavke.naziv}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaPredmetNabavke}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.predmetNabavke.naziv}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaVrstaPostupka}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.vrstaPostupka.naziv}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaOpravdanostNabavke}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.opravdanost}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaNacinProceneVrednosti}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.opisProcena}" readonly="true" />
                  <h:outputLabel styleClass="fimesLabelLeft"
                    value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaNapomenaZaPostupak}" />
                  <h:inputText styleClass="fimesInputText maxWidth"
                    value="#{nabNovaNabavkaController.novaNabavka.napomena}" readonly="true" />
                </h:panelGrid>
                <h:panelGrid columns="1"
                  styleClass="fimesInputGroup fimesTableCentered maxWidth"
                  columnClasses="fimesTable2ColumnLabel,fimesTable2ColumnField"
                  cellspacing="2">
                  <h:panelGrid columns="2" styleClass="alignCenter"
                    width="100%">
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaStatusNabavke}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.statusNabavke.naziv}" readonly="true"  />
                  </h:panelGrid>
                  <h:panelGrid columns="4" styleClass="alignCenter"
                    width="100%">
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaMesecPokretanja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.mesecPokretanja}" readonly="true" />
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaGodinaPokretanja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.godinaPokretanja}" readonly="true" />
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaMesecZakljucenja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.mesecZakljucenja}" readonly="true" />
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaGodinaZakljucenja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.godinaZakljucenja}" readonly="true" />
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaMesecIzvrsenja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.mesecIzvrsenja}" readonly="true" />
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaGodinaIzvrsenja}" />
                    <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.godinaIzvrsenja}" readonly="true" />
                  </h:panelGrid>
                  <h:panelGrid columns="2" styleClass="alignCenter"
                    width="100%">
                    <h:outputLabel styleClass="fimesLabelLeft"
                      value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaTipNabavke}" />
                     <h:inputText styleClass="fimesInputText maxWidth"
                      value="#{nabNovaNabavkaController.novaNabavka.tipNabavke.naziv}" readonly="true" />
                  </h:panelGrid>
                </h:panelGrid>
              </h:panelGrid>
            </h:panelGroup>
            <h:panelGrid columns="1" styleClass="maxWidth">
              <h:panelGrid>
                <rich:spacer height="10" />

                <!--           ODAVDE KREĆE TAB -->

                <rich:tabPanel switchType="ajax" id="tabPanel"
                  styleClass="maxWidth"
                  rendered="#{not empty nabNovaNabavkaController.novaNabavka.idJavnaNabavka}">
<!-- PROCENJENA VREDNOST PO GODINAMA -->
                  <rich:tab id="tab1VrednostPoGodinama"
                    name="tab1VrednostPoGodinama" ajaxSingle="true"
                    label="#{nabNovaNabavkaController.module.messageSource.nabNabavkaProcenjenaVrednost}"
                    height="220px">
                    <rich:extendedDataTable height="200px"
                      rowClasses="redAnimacija"
                      id="tabelaProcenaPoGodinama"
                      enableContextMenu="false"
                      noDataLabel="#{nabNovaNabavkaController.module.messageSource.commonNoDataLabel}"
                      value="#{nabNovaNabavkaController.nabProcenaPoGodiniExtendedDataTableModelApi}"
                      selection="#{nabNovaNabavkaController.nabProcenaPoGodiniExtendedDataTableModelApi.selection}"
                      var="procena">
                      <rich:column width="5%"
                        styleClass="fimesAlignCenter noPadding">
                        <a4j:commandButton ajaxSingle="true"
                          status="waitStatus"
                          id="tabelaNabProcenaPoGodiniBrisanje"
                          action="#{nabNovaNabavkaController.initModalDialogBrisanje}"
                          oncomplete="if(#{empty facesContext.maximumSeverity}){ #{rich:component('coreModalDaNeDijalog')}.show();}
                                    else #{rich:component('coreErrorModalPanel')}.show();"
                          styleClass="fimesButtonImageCross"
                          reRender="coreModalDaNeDijalog,coreErrorModalPanel">
                      <f:setPropertyActionListener value="#{procena}"
                        target="#{nabNovaNabavkaController.nabProcenaPoGodini}" />
                        </a4j:commandButton>
                      </rich:column>
                      <rich:column id="kolona1" width="10%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaListaGodina}" />
                        </f:facet>
                        <h:outputText value="#{procena.godina}" />
                      </rich:column>

                      <rich:column id="kolona2" width="10%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaProcenjenaBezPdv}" />
                        </f:facet>
                        <h:outputText value="#{procena.procenaBezPdv}" />
                      </rich:column>

                      <rich:column id="kolona3" width="20%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaProcenjenaSaPdv}" />
                        </f:facet>
                        <h:outputText value="#{procena.procenaSaPdv}" />
                      </rich:column>
                      <rich:column id="kolona4" width="30%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaVezaSaPlanom}" />
                        </f:facet>
                        <h:outputText value="#{procena.vezaSaFinPlanom}" />
                      </rich:column>
                      <rich:column id="kolona5" width="20%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaNapomena}" />
                        </f:facet>
                        <h:outputText value="#{procena.napomena}" />
                      </rich:column>
                      <rich:column width="5%" styleClass="alignCenter">
                        <f:facet name="header">
                          <h:panelGroup>
                          <a4j:commandButton id="nabProcenaPoGodiniDugmeLov"
                            ajaxSingle="true" tabindex="3"
                            action="#{nabNovaNabavkaController.actionInitSffPoslovniZiroRacunLov}"
                            oncomplete="#{rich:component('nabProcenjenaVrednostUnosModalPanel')}.show()"
                            reRender="nabProcenjenaVrednostUnosModalPanel"
                            styleClass="fimesButtonImageAdd"
                            title="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaTipNabavke}" />
                            <rich:toolTip for="nabProcenaPoGodiniDugmeLov"
                              styleClass="tooltipRichAdd"
                              value="#{nabNovaNabavkaController.module.messageSource.nabTooltipprocenaPoGodiniUnesi}"
                              direction="bottom-left" />
                          </h:panelGroup>
                        </f:facet>
                        <a4j:commandButton
                          id="tabelaNabVrednostPoKontimaAzuriranje"
                          ajaxSingle="true"
                          styleClass="fimesButtonImageEdit"
                          action="#{nabNovaNabavkaController.actionInitProcenaPoGodiniAzur}"
                          oncomplete="#{rich:component('nabProcenjenaVrednostUnosModalPanel')}.show();"
                          reRender="nabProcenjenaVrednostUnosModalPanel">
<!-- Ovo se stalno forsira, ali se uvek kliknuti objekat može dohvatiti iz extended... -->
                           <f:setPropertyActionListener value="#{procena}" 
                             target="#{nabNovaNabavkaController.novaProcenjenaVrednost}" /> 
                        </a4j:commandButton>
                        <rich:toolTip for="tabelaNabVrednostPoKontimaAzuriranje"
                          styleClass="tooltipRichEdit"
                          value="#{nabNovaNabavkaController.module.messageSource.nabTooltipProcenaPoGodiniAzuriraj}"
                          direction="top-left" />
                      </rich:column>
                      <f:facet name="footer">
                        <h:panelGroup layout="block"
                          styleClass="fimesAlignLeft">
                          <h:outputText
                            value="#{nabNovaNabavkaController.module.messageSource.commonUkupno}" />
                          <h:outputText
                            value="#{nabNovaNabavkaController.nabProcenaPoGodiniExtendedDataTableModelApi.ukupnoRedova}">
                            <f:convertNumber pattern="#,###"
                              locale="#{applicationBean.numberLocale}" />
                          </h:outputText>
                        </h:panelGroup>
                      </f:facet>
                    </rich:extendedDataTable>
                  </rich:tab>
<!-- TAB PARTIJE -->
                  <rich:tab id="tab2Partije" name="tab2Partije"
                    ajaxSingle="true"
                    label="#{nabNovaNabavkaController.module.messageSource.nabNabavkaPartije}"
                    height="220px">
                    <rich:extendedDataTable height="200px"
                      rowClasses="redAnimacija"
                      id="tabelaPartijaNabavke"
                      enableContextMenu="false"
                      noDataLabel="#{nabNovaNabavkaController.module.messageSource.commonNoDataLabel}"
                      value="#{nabNovaNabavkaController.nabPartijaNabavkeExtendedDataTableModelApi}"
                      selection="#{nabNovaNabavkaController.nabPartijaNabavkeExtendedDataTableModelApi.selection}"
                      var="partija">
                      <rich:column width="5%"
                        styleClass="fimesAlignCenter noPadding">

                        <a4j:commandButton ajaxSingle="true"
                          status="waitStatus"
                          id="tabelaPartijaNabavkeBrisanje"
                          action="#{nabNovaNabavkaController.initModalDialogBrisanjePartija}"
                          oncomplete="if(#{empty facesContext.maximumSeverity}){ #{rich:component('coreModalDaNeDijalog')}.show();}
                                    else #{rich:component('coreErrorModalPanel')}.show();"
                          styleClass="fimesButtonImageCross"
                          reRender="coreModalDaNeDijalog,coreErrorModalPanel">
                      <f:setPropertyActionListener value="#{partija}"
                        target="#{nabNovaNabavkaController.novaPartija}" />

                        </a4j:commandButton>

                      </rich:column>
                      <rich:column id="kolona1" width="10%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaListaGodina}" />
                        </f:facet>
                        <h:outputText
                          value="#{partija.idPartijaNabavke}" />
                      </rich:column>
                      <rich:column id="kolona2" width="30%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabаvkaNazivPartije}" />
                        </f:facet>
                        <h:outputText
                          value="#{partija.opisPredmetaNabavke}" />
                      </rich:column>
                      <rich:column id="kolona3" width="10%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaProcenjenaBezPdv}" />
                        </f:facet>
                        <h:outputText
                          value="#{partija.procenjenaVrednostBezPdv}" />
                      </rich:column>
                      <rich:column id="kolona4" width="10%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaProcenjenaSaPdv}" />
                        </f:facet>
                        <h:outputText
                          value="#{partija.procenjenaVrednostSaPdv}" />
                      </rich:column>
                      <rich:column id="kolona5" width="30%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaNapomena}" />
                        </f:facet>
                        <h:outputText value="#{partija.napomena}" />
                      </rich:column>
                      <rich:column width="5%" styleClass="alignCenter">
                        <f:facet name="header">
                          <h:panelGroup>
                            <a4j:commandButton id="nabPartijaDugmeLov"
                              ajaxSingle="true" tabindex="3"
                              action="#{nabNovaNabavkaController.clearPartijaSelection}"
                              oncomplete="#{rich:component('nabNovaPartijaModalPanel')}.show()"
                              reRender="nabNovaPartijaModalPanel"
                              styleClass="fimesButtonImageAdd"
                              title="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaTipNabavke}" />
                            <rich:toolTip
                              for="nabPartijaDugmeLov"
                              styleClass="tooltipRichAdd"
                              value="#{nabNovaNabavkaController.module.messageSource.nabTooltipPartijaUnesi}"
                              direction="bottom-left" />
                          </h:panelGroup>
                        </f:facet>
                        <a4j:commandButton
                          id="tabelaPartijaAzuriranje"
                          ajaxSingle="true"
                          styleClass="fimesButtonImageEdit"
                          action="#{nabNovaNabavkaController.actionInitProcenaPoGodiniAzur}"
                          oncomplete="#{rich:component('nabNovaPartijaModalPanel')}.show();"
                          reRender="nabNovaPartijaModalPanel">
<!-- Ovo se stalno forsira, ali se uvek kliknuti objekat može dohvatiti iz extended... -->
                           <f:setPropertyActionListener value="#{partija}" 
                             target="#{nabNovaNabavkaController.novaPartija}" /> 
                        </a4j:commandButton>
                        <rich:toolTip for="tabelaPartijaAzuriranje"
                          styleClass="tooltipRichEdit"
                          value="#{nabNovaNabavkaController.module.messageSource.nabTooltipPartijaAzuriraj}"
                          direction="top-left" />
                      </rich:column>
                      <f:facet name="footer">
                        <h:panelGroup layout="block"
                          styleClass="fimesAlignLeft">
                          <h:outputText
                            value="#{nabNovaNabavkaController.module.messageSource.commonUkupno}" />
                          <h:outputText
                            value="#{nabNovaNabavkaController.nabPartijaNabavkeExtendedDataTableModelApi.ukupnoRedova}">
                            <f:convertNumber pattern="#,###"
                              locale="#{applicationBean.numberLocale}" />
                          </h:outputText>
                        </h:panelGroup>
                      </f:facet>

                    </rich:extendedDataTable>
                  </rich:tab>
<!--                   TAB Vrednost po Kontima -->
                  <rich:tab id="tab3VrednostPoKontima"
                    name="tab3VrednostPoKontima" ajaxSingle="true"
                    label="#{nabNovaNabavkaController.module.messageSource.nabNabavkaPlaniranaVrednostPoKontima}"
                    height="220px">
                    <rich:extendedDataTable height="200px"
                      rowClasses="redAnimacija"
                      id="tabelaNabKontoPartija"
                      enableContextMenu="false"
                      noDataLabel="#{nabNovaNabavkaController.module.messageSource.commonNoDataLabel}"
                      value="#{nabNovaNabavkaController.nabNabavkaKontoPartijaExtendedDataTableModelApi}"
                      selection="#{nabNovaNabavkaController.nabNabavkaKontoPartijaExtendedDataTableModelApi.selection}"
                      var="nabavkaKontoPartija">
                      <rich:column width="5%"
                        styleClass="tabelaHederCentrirano">
                        <f:facet name="header">
                        </f:facet>
                        <a4j:commandButton id="ikonica"
                          action="#{nabNovaNabavkaController.initModalDialogBrisanjeKontoPartija}"
                          oncomplete="#{rich:component('coreModalDaNeDijalog')}.show()"
                          reRender="coreModalDaNeDijalog"
                          styleClass="fimesButtonImageCross">
                          <f:setPropertyActionListener
                            value="#{nabavkaKontoPartija}"
                            target="#{nabNovaNabavkaController.novaNabNabavkaKontoPartija}" />
                          <rich:toolTip
                            value="#{nabNovaNabavkaController.module.messageSource.nabTooltipVrednostPoKontimaObrisi}"
                            direction="bottom-right" />
                        </a4j:commandButton>
                      </rich:column>
                      <rich:column id="kolona1" width="20%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabKontoPozicija}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.nabKonto.naziv}" />
                      </rich:column>
                      <rich:column id="kolona1" width="15%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabаvkaNazivPartije}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.partijaNabavke.opisPredmetaNabavke}" />
                      </rich:column>
                      <rich:column id="kolona1" width="15%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaPlaniranaBezPdv}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.vrednostBezPdv}" />
                      </rich:column>
                      <rich:column id="kolona1" width="15%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaPlaniranaSaPdv}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.vrednostSaPdv}" />
                      </rich:column>
                      <rich:column id="kolona1" width="25%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaPlaniranaVrednostPoKontimaIzvorFinansiranja}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.izvorFinansiranja.naziv}" />
                      </rich:column>
                      <rich:column id="kolona1" width="15%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaNapomena}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaKontoPartija.napomena}" />
                      </rich:column>
                      <f:facet name="footer">
                        <h:panelGroup layout="block"
                          styleClass="fimesAlignLeft">
                          <h:outputText
                            value="#{nabNovaNabavkaController.module.messageSource.commonUkupno}" />
                          <h:outputText
                            value="#{nabNovaNabavkaController.nabNabavkaKontoPartijaExtendedDataTableModelApi.ukupnoRedova}">
                            <f:convertNumber pattern="#,###"
                              locale="#{applicationBean.numberLocale}" />
                          </h:outputText>
                        </h:panelGroup>
                      </f:facet>
                      <rich:column width="5%" styleClass="alignCenter">
                        <f:facet name="header">
                          <h:panelGroup>
                            <a4j:commandButton
                              id="nabPlaniranaVrednostPoKontimaDugmeLov"
                              ajaxSingle="true" tabindex="3"
                              action="#{nabNovaNabavkaController.actionInitSffPoslovniZiroRacunLov}"
                              oncomplete="#{rich:component('nabNovaPlaniranaVrednostPoKontimaModalPanel')}.show()"
                              reRender="nabNovaPlaniranaVrednostPoKontimaModalPanel"
                              styleClass="fimesButtonImageAdd"
                              title="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaTipNabavke}" />
                            <rich:toolTip for="nabPlaniranaVrednostPoKontimaDugmeLov"
                              styleClass="tooltipRichAdd"
                              value="#{nabNovaNabavkaController.module.messageSource.nabTooltipVrednostPoKontimaUnesi}"
                              direction="bottom-left" />
                          </h:panelGroup>
                        </f:facet>
                        <a4j:commandButton
                          id="tabelaNabVrednostPoKontimaAzuriranje"
                          ajaxSingle="true"
                          styleClass="fimesButtonImageEdit"
                          action="#{nabNovaNabavkaController.actionInitVrednostPoKontimaAzur}"
                          oncomplete="#{rich:component('nabNovaPlaniranaVrednostPoKontimaModalPanel')}.show();"
                          reRender="nabNovaPlaniranaVrednostPoKontimaModalPanel">
<!-- Ovo se stalno forsira, ali se uvek kliknuti objekat može dohvatiti iz extended... -->
                           <f:setPropertyActionListener value="#{nabavkaKontoPartija}" 
                             target="#{nabNovaNabavkaController.novaNabNabavkaKontoPartija}" /> 
                        </a4j:commandButton>
                        <rich:toolTip for="tabelaNabVrednostPoKontimaAzuriranje"
                          styleClass="tooltipRichEdit"
                          value="#{nabNovaNabavkaController.module.messageSource.nabTooltipVrednostPoKontimaAzuriraj}"
                          direction="top-left" />
                      </rich:column>
                    </rich:extendedDataTable>
                  </rich:tab>
<!--                   TAB JRN -->
                  <rich:tab id="tab4Jrn" name="tab4Jrn"
                    ajaxSingle="true"
                    label="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabаvkaOrn}"
                    height="220px">
                    <rich:extendedDataTable height="200px"
                      rowClasses="redAnimacija"
                      id="tabelaNabavkaJrnExtended"
                      enableContextMenu="false"
                      noDataLabel="#{nabNovaNabavkaController.module.messageSource.commonNoDataLabel}"
                      value="#{nabNovaNabavkaController.nabNabavkaJrnExtendedDataTableModelApi}"
                      selection="#{nabNovaNabavkaController.nabNabavkaJrnExtendedDataTableModelApi.selection}"
                      var="nabavkaJrn">
                      <rich:column width="10%"
                        styleClass="fimesAlignCenter noPadding">

                        <a4j:commandButton ajaxSingle="true"
                          status="waitStatus"
                          id="tabelaNabavkaJrnBrisanje"
                          action="#{nabNovaNabavkaController.initModalDialogBrisanjeJrn}"
                          oncomplete="if(#{empty facesContext.maximumSeverity}){ #{rich:component('coreModalDaNeDijalog')}.show();}
                                    else #{rich:component('coreErrorModalPanel')}.show();"
                          styleClass="fimesButtonImageCross"
                          reRender="coreModalDaNeDijalog,coreErrorModalPanel">
                      <f:setPropertyActionListener value="#{nabavkaJrn}"
                        target="#{nabNovaNabavkaController.novaNabavkaJrn}" />

                        </a4j:commandButton>

                      </rich:column>
                      <rich:column id="kolona1" width="20%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabаvkaOrnKod}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaJrn.nabJrn.kod}" />
                      </rich:column>
                      <rich:column id="kolona2" width="30%"
                        styleClass="fimesAlignLeft">
                        <f:facet name="header">
                          <h:outputText styleClass="headerText"
                            value="#{nabNovaNabavkaController.module.messageSource.common_naziv}" />
                        </f:facet>
                        <h:outputText
                          value="#{nabavkaJrn.nabJrn.opis}" />
                      </rich:column>
                      <rich:column width="5%" styleClass="alignCenter">
                        <f:facet name="header">
                          <h:panelGroup>
                            <a4j:commandButton
                              id="nabNabavkaJrnDugmeLov"
                              ajaxSingle="true" tabindex="3"
                              action="#{nabNovaNabavkaController.actionInitSffPoslovniZiroRacunLov}"
                              oncomplete="#{rich:component('nabNoviJrnModalPanel')}.show()"
                              reRender="nabNoviJrnModalPanel"
                              styleClass="fimesButtonImageAdd"
                              title="#{nabNovaNabavkaController.module.messageSource.nabNabavkaNovaNabavkaTipNabavke}" />
                            <rich:toolTip for="nabNabavkaJrnDugmeLov"
                              styleClass="tooltipRichAdd"
                              value="#{nabNovaNabavkaController.module.messageSource.nabTooltipOrnUnesi}"
                              direction="bottom-left" />
                          </h:panelGroup>
                        </f:facet>
                      </rich:column>
                      <f:facet name="footer">
                        <h:panelGroup layout="block"
                          styleClass="fimesAlignLeft">
                          <h:outputText
                            value="#{nabNovaNabavkaController.module.messageSource.commonUkupno}" />
                          <h:outputText
                            value="#{nabNovaNabavkaController.nabNabavkaJrnExtendedDataTableModelApi.ukupnoRedova}">
                            <f:convertNumber pattern="#,###"
                              locale="#{applicationBean.numberLocale}" />
                          </h:outputText>
                        </h:panelGroup>
                      </f:facet>
                    </rich:extendedDataTable>
                  </rich:tab>
                  <rich:tab id="tab5Izmene" name="tab5Izmene"
                    ajaxSingle="true"
                    label="#{nabNovaNabavkaController.module.messageSource.nabNabavkaIzmeneNabavke}"
                    height="220px">
                  </rich:tab>
                </rich:tabPanel>
              </h:panelGrid>
              <rich:messages globalOnly="true"
                warnClass="validationAttention"
                errorClass="fimesValidErrMsg" />
            </h:panelGrid>
            <h:panelGrid columns="4">
              <a4j:commandButton
                styleClass="fimesButton objDugmeUFuteruTabele"
                status="statusWait"
                value="#{nabNabavkaController.module.messageSource.nabNabavkaAzuriranjeNabavke}"
                action="#{nabNabavkaController.azurirajNabavku}"
                oncomplete="#{rich:component('nabNovaNabavkaModalPanel')}.show()"
                reRender="nabNovaNabavkaModalPanel"
                disabled="#{empty nabNabavkaController.izabranaNabavka}" />
              <a4j:commandButton styleClass="fimesButton"
                action="nazad"
                value="#{nabNabavkaController.module.messageSource.common_izlaz}" />
            </h:panelGrid>
            <a4j:include
              viewId="#{coreWebController.coreModalDaNeDijalogView}" />
            <a4j:include
              viewId="#{coreWebController.coreModalOkDijalogView}" />
            <a4j:include
              viewId="#{coreWebController.coreModalErrorDijalogView}" />
          </h:form>
        </rich:panel>
        <a4j:include
          viewId="#{nabWebController.nabProcenjenaVrednostUnosModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNovaNabavkaModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNovaPartijaModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNoviJrnModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNoviJrnLovModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNovaPlaniranaVrednostPoKontimaModalPanelView}" />
        <a4j:include
          viewId="#{nabWebController.nabNovaPlaniranaVrednostPoKontimaLovModalPanelView}" />
        <a4j:include
          viewId="#{coreWebController.ajaxStatusModalPanelView}" />
        <a4j:status id="waitStatus"
          onstart="#{rich:component('ajaxStatusModalPanel')}.show()"
          onstop="#{rich:component('ajaxStatusModalPanel')}.hide()" />
      </ui:define>
    </ui:composition>
  </f:view>
</body>
</html>